<!doctype html>
<html lang="fr">

	<head>
		<meta charset="utf-8">

		<title>Quoi de neuf dans ES2020¬†? ‚Ä¢ Christophe Porteneuve @ Paris Web 2017</title>

		<meta name="description" content="ES2015 d√©chire et ES2017 est super cool, mais plein de trucs int√©ressants arrivent tout bient√¥t‚Ä¶ et on peut d√©j√† jouer avec¬†!">
		<meta name="author" content="Christophe Porteneuve">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href='css/fonts.css' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/animate.min.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme-basis">
		<link rel="stylesheet" href="css/theme/pw15.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/prism.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
    if (window.location.search.match(/print-pdf/gi)) {
      var link = document.createElement('link')
      link.rel = 'stylesheet'
      link.type = 'text/css'
      link.href = 'css/print/pdf.css'
      document.getElementsByTagName('head')[0].appendChild(link)
    }
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-43650325-20', 'auto');
      ga('send', 'pageview');
    </script>
	</head>

	<body id="prioFix">

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section id="mainTitle">
					<h1>
            <span>Quoi de neuf dans</span> ES2020¬†?
          </h1>
					<p>
						<small>Une s√©lection de trucs cools de <a href="http://tddsworld.com/">Christophe Porteneuve</a> at <a href="https://www.paris-web.fr/">Paris Web 2017</a></small>
					</p>
				</section>

				<section id="whoami">
					<h2>whoami</h2>

					<pre><code data-trim class="language-js">
const christophe = {
  family: { wife: '√âlodie', son: 'Maxence' },
  city: 'Paris, FR',
  company: 'Delicious Insights',
  trainings: [
    'Web Apps Modernes', 'Node.js', 'Git Total',
    'ES Total', 'Webpack'
  ],
  webSince: 1995,
  claimsToFame: [
    'Prototype.js',
    'Ruby On Rails',
    'Prototype and Script.aculo.us',
    'Paris Web',
    'NodeSchool Paris'
  ],
}
          </code></pre>
				</section>

        <section data-state="theme-color-blue-yellow">
          <section id="tc39">
            <h1>ES2020¬†?!</h1>
            <h3>ECMA, le TC39, ECMAScript et JavaScript</h3>
          </section>

          <section>
            <h2>ECMA et le TC39</h2>

            <p>L‚ÄôECMA est un organisme international de standardisation.</p>
            <p>(comme l‚ÄôISO, l‚ÄôIETF ou le W3C, par exemple)</p>
            <p>ES = ECMAScript. Le standard officiel de JavaScript*</p>
            <p>
              TC39 = Technical Committee 39. S‚Äôoccupe de plusieurs standards¬†:<br/>
              ECMAScript (ECMA-262), Intl (ECMA-402), JSON (ECMA-404), etc
            </p>

            <footer>* Qui est en fait aujourd‚Äôhui une marque d‚ÄôOracle aux US.  Si.  Je sais.</footer>
          </section>

          <section>
            <h2>Le process d‚Äô√©volution du langage</h2>

            <p>R√©unions itin√©rantes tous les 2 mois.  Une version officielle par an, en juin.</p>
            <p>¬´¬†ES6¬†¬ª ‚û°Ô∏è ES2015, ¬´¬†ES7¬†¬ª ‚û°Ô∏è ES2016, et d√©sormais ES2017, etc.</p>
            <p>Tout est <a href="https://github.com/tc39">public</a>. Les propositions d‚Äô√©volutions traversent <a href="https://tc39.github.io/process-document/">5 stades</a>¬†:</p>

            <table>
              <thead>
                <tr><th>Stade</th><th>Description</th></tr>
              </thead>
              <tbody>
                <tr>
                  <th>0¬†Strawman</th>
                  <td>¬´¬†Ce serait bien si on avait un op√©rateur licorne (ü¶Ñ) pour‚Ä¶¬†¬ª</td>
                </tr>
                <tr>
                  <th>1¬†Proposition</th>
                  <td>Un membre du TC39 est ¬´¬†champion¬†¬ª. On a d√©j√† d√©broussaill√© la t√™te qu‚Äôaurait le code, l‚Äôimpact sur l‚Äôexistant, etc.</td>
                </tr>
                <tr>
                  <th>2¬†Brouillon</th>
                  <td>Texte initial de la spec, couvre en d√©tail tous les aspects critiques et la s√©mantique technique de la fonctionnalit√©.</td>
                </tr>
                <tr>
                  <th>3¬†Candidat</th>
                  <td>La spec est compl√®te, v√©rifi√©e par qui de droit et valid√©e.  L‚ÄôAPI est finalis√©e, il ne reste aucune zone d‚Äôombre.</td>
                </tr>
                <tr>
                  <th>4¬†Fini</th>
                  <td>Couvert par Test262, impl√©ment√© en natif par 2+ moteurs r√©pandus (ex. V8 et SpiderMonkey), <abbr title='Retour d‚ÄôExp√©rience'>REX</abbr> significatif.</td>
                </tr>
              </tbody>
            </table>
          </section>
        </section>

        <section data-state="theme-color-silver-green">
          <section id="es2017">
            <h1>Rappels</h1>
            <h3>ES2017</h3>
          </section>

          <section id="trailing-commas">
            <h2>Virgules terminales</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-trailing-function-commas">Trailing commas</a></h4>

            <div class="two-columns">
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
function yowza (
  key,
  increment<u>,</u>
) {
  // ‚Ä¶
}
                </code></pre>
              </div>
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
const yowza = (
  key,
  increment<u>,</u>
) => ‚Ä¶
                </code></pre>

                <pre><code class="language-js" data-trim data-keep-tags="u">
yowza(
  'itemScore',
  +10<u>,</u>
)
                </code></pre>
              </div>
            </div>

            <p>N‚Äôoubliez pas que depuis ES5 (2009‚Ä¶) on pouvait d√©j√† faire √ßa¬†:</p>

            <div class="two-columns">
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
const roiDeLaClasse = {
  first: 'Georges',
  last: 'Abitbol'<u>,</u>
}
                </code></pre>
              </div>
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
const courses = [
  'ES Total',
  'Webpack'<u>,</u>
]
                </code></pre>
              </div>
            </div>
          </section>

          <section id="async-await">
            <h2><code>async</code> / <code>await</code></h2>
            <h4 lang="en"><a href="https://github.com/tc39/ecmascript-asyncawait">Async functions</a></h4>

            <pre><code class="language-js" data-trim data-keep-tags="u">
<u>async</u> function createEntry(req, res) {
  <u>try</u> {
    const urlReq = <u>await</u> fetch(req.body.url)
    const html = <u>await</u> urlReq.text()
    const analysis = unfluff(html)
    const entry = <u>await</u> Entry.post({ ‚Ä¶ })
    // ‚Ä¶
  } <u>catch</u> (err) {
    req.flash('error', `Une erreur est survenue en traitant cette URL : ${err.message}`)
    res.redirect('/entries/new')
  }
}
            </code></pre>

            <pre><code class="language-js" data-trim data-keep-tags="u">
const [tags, entryCount, entries] = <u>await</u> Promise.all([
  Entry.tags(), Entry.count(), Entry.getEntries(req.query),
])
            </code></pre>
          </section>
        </section> <!-- #es2017 -->

        <section data-state="theme-color-forest-yellow">
          <section id="es2018">
            <h1>ES0218</h1>
            <h3>probablement (stade 3)</h3>
          </section>

          <section id="async-iteration">
            <h2>It√©ration asynchrone</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-async-iteration">Async iteration</a></h4>

            <p>Des files de requ√™tes faciles‚Ä¶  Naturellement bas√© promesses et <code>async</code>/<code>await</code>.</p>

            <div class="two-columns">
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
for <u>await</u> (const line of readLines(filePath)) {
  console.log(line)
}
                </code></pre>
              </div>
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
<u>async function*</u> readLines(path) {
  let file = await fileOpen(path);

  try {
    while (!file.EOF) {
      yield await file.readLine();
    }
  } finally {
    await file.close();
  }
}
                </code></pre>
              </div>
            </div>
          </section>

          <section id="rest-spread-properties">
            <h2>Rest / Spread de propri√©t√©s</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-object-rest-spread">Rest / Spread properties</a></h4>

            <pre><code class="language-js" data-trim data-keep-tags="u">
// nonStandardAction = { type: 'progress', goalId: 1, increment: 2 }

const { type, <u>...</u>payload } = nonStandardAction
// => payload = { goalId: 1, increment: 2 }
            </code></pre>

            <pre><code class="language-js" data-trim data-keep-tags="u">
function doStuff (url, options = {}) {
  const opts = { <u>...</u>DEFAULT_OPTIONS, <u>...</u>options, regular: true }
  // ‚Ä¶
}
            </code></pre>

            <pre><code class="language-js" data-trim data-keep-tags="u">
return {
  <u>...</u>state,
  history: tallyHistory(state),
  today: moment().format('YYYY-MM-DD'),
  todaysProgress: {},
}
            </code></pre>

            <p>
              Notez que c‚Äôest un nouveau comportement <strong>par d√©faut</strong>¬†:<br>
              il √©tait d√©j√† possible de d√©finir une <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Symbol/iterator">it√©rabilit√© personnalis√©e</a> pour nos objets.
            </p>
          </section>

          <section id="class-fields">
            <h2>Champs</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-class-fields">Class fields</a></h4>

            <pre><code class="language-js" data-trim data-keep-tags="u">
class APIConnector extends Component {
  // Champ statique (ici, public)
  <u>static propTypes =</u> {
    apiKey: PropTypes.string.isRequired,
  }

  // Champ d‚Äôinstance priv√© (sans contournement possible) (s√©mantique "friend" C++)
  <u>#secretToken =</u> null

  // Champ d‚Äôinstance public (valeur par d√©faut avant code du constructeur)
  <u>awesome =</u> true

  // ‚Ä¶
}
            </code></pre>
          </section>

          <section id="dynamic-import">
            <h2><code>import(‚Ä¶)</code></h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-dynamic-import">Dynamic import</a></h4>

            <p>
              Permet l‚Äôimport de modules ES natifs dont le sp√©cificateur n‚Äôest pas connu √† l‚Äôavance<br>
              (ex. scenarii de <em>code splitting</em> pour les routes, langues, etc.)
            </p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
import(`./l10n/${currentUser.locale}`)
  .then((locale) => app.l10n.use(locale))
  .catch((err) => app.reportError(err))
            </code></pre>

            <p>Encore plus classe¬†:</p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
try {
  app.l10n.use(await import(`./l10n/${currentUser.locale}`))
} catch (err) {
  app.reportError(err)
}
            </code></pre>
          </section>

          <section id="regexp">
            <h2>La folie dans les RegExp¬†!</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-regexp-named-groups">RegExp named capture groups</a></h4>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes">RegExp Unicode property escapes</a></h4>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-regexp-dotall-flag">RegExp DotAll flag</a></h4>

            <p>XRegExp, tes jours sont compt√©s‚Ä¶ üòâ</p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
const RE_ISO_DATE = /(?<u>&lt;year></u>\d{4})-(?<u>&lt;month></u>\d{2})-(?<u>&lt;day></u>\d{2})/u
console.log(RE_ISO_DATE.exec('2017-10-05')<u>.groups</u>) // => { year: '2017', month: '10', day: '05' }
'2017-10-05'.replace(RE_ISO_DATE, '<u>$&lt;day></u>/<u>$&lt;month></u>/<u>$&lt;year></u>') // => '05/10/2017'

const RE_DIGITS = /^<u>\p{Decimal_Number}</u>+$/u
RE_DIGITS.test('ùüèùüêùüëùüúùüùùüûùü©ùü™ùü´ùü¨ùü≠ùüÆùüØùü∫ùüªùüº') // => true

const RE_ANYTHING_GOES = /foo.bar/<u>s</u>
RE_ANYTHING_GOES.test('foo\nbar') // => true
            </code></pre>
          </section>
        </section> <!-- #es2018 -->

        <section data-state="theme-color-blue-yellow">
          <section id="es2019">
            <h1>ES0219</h1>
            <h3>probablement (stade 2)</h3>
            <img class="fragment" src="images/stade2-regular.png">
            <img class="fragment" src="images/stade2-full.png">
          </section>


          <section id="private-methods">
            <h2>M√©thodes et accesseurs priv√©s</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-private-methods">Private methods and accessors</a></h4>

            <p>La continuation logique des champs priv√©s‚Ä¶</p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
class APIConnector {
  get <u>#</u>apiToken () {
    ‚Ä¶
  }

  set <u>#</u>apiToken (value) {
    ‚Ä¶
  }

  <u>#</u>checkConnectivity () {
    ‚Ä¶
  }
}
            </code></pre>
          </section>

          <section id="numeric-separators">
            <h2>S√©parateurs num√©riques</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-numeric-separator">Numeric separators</a></h4>

            <p>Y‚Äôa pas de raison qu‚Äôon soit un des rares langages sans¬†! üò†</p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
const FACTOR = <u>1_000_000_000</u>
const FEE = <u>123_00</u>

const FRACTION = <u>0.000_001</u>

const BITS = <u>0b1010_0001_1000_0101</u>
const FLAG = <u>0xDEAD_BEEF</u>
            </code></pre>
          </section>

          <section id="throw-expressions">
            <h2><code>throw</code> √† la vol√©e</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-throw-expressions">Throw expressions</a></h4>

            <p>Plus seulement une instruction.  √âvite des fonctions d‚Äôenrobage superflues.</p>

            <pre><code class="language-js" data-trim data-keep-tags="u">
function save (fileName = <u>throw</u> new TypeError('File name required')) {
  ‚Ä¶
}

            </code></pre>

            <pre><code class="language-js" data-trim data-keep-tags="u">
function getEncoder (encoding) {
  // Oui, c'est mochissime ces ternaires imbriqu√©s, je sais‚Ä¶
  const encoder = encoding === 'utf8' ? new UTF8Encoder()
                : encoding === 'utf16le' ? new UTF16Encoder(false)
                : encoding === 'utf16be' ? new UTF16Encoder(true)
                : <u>throw</u> new Error(`Unsupported encoding: ${encoding}`)
  ‚Ä¶
}
            </code></pre>
          </section>

          <section id="decorators">
            <h2>D√©corateurs</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-decorators">Decorators</a></h4>

            <div class="two-columns">
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
<u>@mixin</u>(SocialNetworkAddictMixin)
class Person {
  <u>@deprecate</u>
  facepalm () { ‚Ä¶ }

  <u>@throttle</u>('1hr', { leading: true })
  checkFacebook () { ‚Ä¶ }

  <u>@memoize</u>('15min')
  checkTwitter () { ‚Ä¶ }
}
                </code></pre>
              </div>
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
class Person {
  <u>@computedFrom</u>('firstName', 'lastName')
  get fullName () {
    return `${this.firstName} ${this.lastName}`
  }
}
                </code></pre>

                <pre><code class="language-js" data-trim data-keep-tags="u">
<u>@connect</u>(mapStateToProps, { logOut })
class SettingsScreen extends Component {
  <u>@autobind</u>
  openGoalAdder () { ‚Ä¶ }

  <u>@override</u>
  componentWillReceiveProps () { ‚Ä¶ }
}
                </code></pre>
              </div>
            </div>
          </section>
        </section> <!-- #es2019 -->

        <section data-state="theme-color-silver-green">
          <section id="esnext">
            <h1>ES0219</h1>
            <h3>ou plus tard (stade 1)</h3>
          </section>

          <section id="optional-chaining">
            <h2>Cha√Ænage optionnel</h2>
            <h4 lang="en"><a href="https://github.com/tc39/proposal-optional-chaining">Optional Chaining</a></h4>

            <pre><code class="language-js" data-trim data-keep-tags="u">
// Cha√Ænage profond¬†? OKLM.
const userStreet = user<u>?.</u>address<u>?.</u>street

// M√™me pour l‚Äôindexation indirecte, hein‚Ä¶
const userProp = user<u>?.</u>[propName]

// M√©thode optionnelle¬†? Aucun probl√®me‚Ä¶
iterator.return<u>?.</u>()
            </code></pre>
          </section>

          <section id="protocols">
            <h2>V√©ritables protocoles</h2>
            <h4 lang="en"><a href="https://github.com/michaelficarra/proposal-first-class-protocols">First-class protocols</a></h4>

            <div class="two-columns">
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
<u>protocol</u> RubyStyleEnumerable {
  // Symbole(s) √† impl√©menter au cas par cas
  _each

  // M√©thodes (impl√©ment√©es) par-dessus
  cycle (‚Ä¶) { ‚Ä¶ }
  count () { ‚Ä¶ }
  drop (‚Ä¶) { ‚Ä¶ }
  each (‚Ä¶) { ‚Ä¶ }
  map (‚Ä¶) { ‚Ä¶ }
  ‚Ä¶
}
                </code></pre>
              </div>
              <div>
                <pre><code class="language-js" data-trim data-keep-tags="u">
class Hash <u>implements RubyStyleEnumerable</u> {
  // On impl√©mente le symbole √† notre sauce‚Ä¶
  [RubyStyleEnumerable._each] () { ‚Ä¶ }

  // ‚Ä¶et on a le reste gratuitement üòâ
}
                </code></pre>
              </div>
            </div>

            <footer>C‚Äôest tout frais¬†! Accept√© en stade 1 jeudi dernier (28/09/2017)¬†!</footer>
          </section>
        </section> <!-- #esnext -->

        <section>
          <h1>Merci¬†!</h1>
          <h3>Et que JS soit avec vous.</h3>
          <br>
          <p>Christophe Porteneuve</p>
          <p><a href="https://twitter.com/porteneuve">@porteneuve</a></p>

          <p class="breathing">
            Les slides sont sur <a href="http://bit.ly/pw-es2020">bit.ly/pw-es2020</a><br/>
          </p>
        </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
    <script src="plugin/highlight/prism.js"></script>
		<script src="js/reveal.js"></script>

		<script>
      // Full list of configuration options available here: // https://github.com/hakimel/reveal.js#configuration
      /* global Reveal */
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        width: '95%',
        height: '90%',

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function () { return !document.body.classList } },
          { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]') } },
          { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]') } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList } },
          { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList } }
        ]
      })
		</script>

	</body>
</html>
